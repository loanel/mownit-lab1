package mownitLab;


import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.RefineryUtilities;

import javax.swing.*;

public class TaskFour {

    public double logistic(double y, double r) {
        return r * y * (1.0 - y);
    }

    public float floatLogistic(float y, float r) {
        return r * y * (1 - y);
    }

    public void zeroTest(float y, float r) {
        int iterations = 0;
        System.out.println("Inital = " + y);
        while (y != 0) {
            iterations++;
            y = floatLogistic(y, r);
//            System.out.println(y);
        }
        System.out.println("Iterations = " + iterations);
    }

    public void taskA() {
        XYSeriesCollection gatheredData = new XYSeriesCollection();
        XYSeries dataset = new XYSeries("Bifurcation Diagram");

        for (double r = 1; r <= 4; r += 0.00001) {

//            double y = 0.3;
//            result seems better with random
            double y = Math.random();
            for (int i = 0; i < 5000; i++) {
                y = logistic(y, r);
            }
            for (int i = 0; i < 50; i++) {
                y = logistic(y, r);
                dataset.add(r, y);
            }
        }

        System.out.println("Gathered data");
        gatheredData.addSeries(dataset);
        BifurcationScatterPlot bif = new BifurcationScatterPlot("Bifurcation", gatheredData);
        bif.setSize(1440, 960);
        bif.setLocationRelativeTo(null);
        bif.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        bif.setVisible(true);
    }

    public void taskB() {
        XYSeriesCollection gatheredData = new XYSeriesCollection();
        XYSeries dataset = new XYSeries("Bifurcation");
        //uncomment to graph with picked precision
        for (double r = 3.75; r <= 3.8; r += 0.0000005) {

            double y = 0.3;
            for (int i = 0; i < 1000; i++) {
                y = logistic(y, r);
            }
            for (int i = 0; i < 50; i++) {
                y = logistic(y, r);
                dataset.add(r, y);
            }
        }

        // 4.b for floats
//        for (float r = (float)3.75; r <= 3.8; r += 0.0000005) {
//
//            float y = (float)0.3;
//            for (int i = 0; i < 1000; i++) {
//                y = floatLogistic(y, r);
//            }
//            for (int i = 0; i < 50; i++) {
//                y = floatLogistic(y, r);
//                dataset.add(r, y);
//            }
//        }

        System.out.println("Gathered data");
        gatheredData.addSeries(dataset);
        BifurcationScatterPlot bif = new BifurcationScatterPlot("Bifurcation", gatheredData);
        bif.setSize(1440, 960);
        bif.setLocationRelativeTo(null);
        bif.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        bif.setVisible(true);
    }

    public void taskC() {
        zeroTest((float)0, 4);
        zeroTest((float)0.5, 4);
        zeroTest(1, 4);
//        zeroTest((float)0.25, 4);
//        zeroTest((float)0.75, 4);

    }

    public void calculate() {
//        taskA();
//        taskB();
        taskC();
    }

};

















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































